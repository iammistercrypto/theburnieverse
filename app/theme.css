@tailwind base;
@tailwind components;
@tailwind utilities;

@import url("https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap");

:root {
  --background: #ffffff;
  --foreground: #000000;
  --app-gray: #e5e7eb;
  --app-accent: #ff4500; /* Fiery red */
  --app-accent-hover: #ff8c00; /* Orange */
  --app-accent-active: #e07c00; /* Darker orange */
  --app-accent-light: rgba(255, 69, 0, 0.2); /* Light fiery overlay */
  --app-gray-dark: #e0e0e0;
  --app-card-bg: rgba(255, 255, 255, 0.4);
  --app-card-border: rgba(0, 0, 0, 0.1);
  --app-foreground-muted: #58585c;
  --ock-text-foreground-muted: #6b7280;
  --text-glow: 0 0 5px rgba(255, 255, 255, 0.3); /* Text glow */
  --smoke-color: rgba(0, 0, 0, 0.1); /* Smoky overlay */
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #111111; /* Black base */
    --foreground: #ffffff;
    --app-gray: #374151;
    --app-accent: #ff4500;
    --app-accent-hover: #ff8c00;
    --app-accent-active: #e07c00;
    --app-accent-light: rgba(255, 69, 0, 0.2);
    --app-gray-dark: #2e2e2e;
    --app-card-bg: rgba(17, 17, 17, 0.4);
    --app-card-border: rgba(115, 115, 115, 0.5);
    --app-foreground-muted: #c8c8d1;
    --ock-text-foreground-muted: #9ca3af;
    --text-glow: 0 0 5px rgba(255, 255, 255, 0.5); /* Stronger in dark mode */
    --smoke-color: rgba(0, 0, 0, 0.2); /* Darker smoke in dark mode */
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: "Geist", Arial, sans-serif;
  font-optical-sizing: auto;
  font-weight: 400;
  font-style: normal;
  font-size: 80%;
  text-shadow: var(--text-glow); /* Text glow for contrast */
  overscroll-behavior: none; /* Prevent bounce-back */
}

.mini-app-theme {
  --ock-font-family: "Geist", Arial, sans-serif;
  --ock-border-radius: 0.75rem;
  --ock-border-radius-inner: 0.5rem;
  --ock-text-inverse: var(--background);
  --ock-text-foreground: var(--foreground);
  --ock-text-foreground-muted: var(--app-foreground-muted);
  --ock-text-error: #ef4444;
  --ock-text-primary: var(--app-accent);
  --ock-text-success: #22c55e;
  --ock-text-warning: #f59e0b;
  --ock-text-disabled: #a1a1aa;
  --ock-bg-default: var(--background);
  --ock-bg-default-hover: var(--app-gray);
  --ock-bg-default-active: var(--app-gray-dark);
  --ock-bg-alternate: var(--app-gray);
  --ock-bg-alternate-hover: var(--app-gray-dark);
  --ock-bg-alternate-active: var(--app-gray-dark);
  --ock-bg-inverse: var(--foreground);
  --ock-bg-inverse-hover: #2a2a2a;
  --ock-bg-inverse-active: #3a3a3a;
  --ock-bg-primary: var(--app-accent);
  --ock-bg-primary-hover: var(--app-accent-hover);
  --ock-bg-primary-active: var(--app-accent-active);
  --ock-bg-primary-washed: var(--app-accent-light);
  --ock-bg-primary-disabled: #80a8ff;
  --ock-bg-secondary: var(--app-gray);
  --ock-bg-secondary-hover: var(--app-gray-dark);
  --ock-bg-secondary-active: #d1d1d1;
  --ock-bg-error: #fee2e2;
  --ock-bg-warning: #fef3c7;
  --ock-bg-success: #dcfce7;
  --ock-bg-default-reverse: var(--foreground);
  --ock-icon-color-primary: var(--app-accent);
  --ock-icon-color-foreground: var(--foreground);
  --ock-icon-color-foreground-muted: #71717a;
  --ock-icon-color-inverse: var(--background);
  --ock-icon-color-error: #ef4444;
  --ock-icon-color-success: #22c55e;
  --ock-icon-color-warning: #f59e0b;
  --ock-line-primary: var(--app-accent);
  --ock-line-default: var(--app-gray-dark);
  --ock-line-heavy: #a1a1aa;
  --ock-line-inverse: #d4d4d8;
  background: var(--background);
  animation: smokeAnimation 10s infinite ease-in-out;

  /* Prefer dark UI for native form controls (helps opened <select>) */
  color-scheme: dark;
}
.mini-app-theme select { color-scheme: dark; }

.mini-app-theme a { /* Target "Read Now" button */
  animation: wiggle 2s infinite ease-in-out;
}

@keyframes wiggle {
  0% { transform: translateX(0); }
  25% { transform: translateX(-3px); }
  50% { transform: translateX(3px); }
  75% { transform: translateX(-3px); }
  100% { transform: translateX(0); }
}

/* Do not force black text on select */
button, a {
  touch-action: manipulation;
  position: relative;
  outline: none;
  text-shadow: var(--text-glow);
  font-weight: 700;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
  color: #000000 !important; /* Buttons/links stay black text */
}

.mini-app-theme button { animation: textPulse 2s infinite ease-in-out; }

@keyframes textPulse {
  0% { text-shadow: 0 0 5px rgba(255, 69, 0, 0.3); }
  50% { text-shadow: 0 0 10px rgba(255, 69, 0, 0.6); }
  100% { text-shadow: 0 0 5px rgba(255, 69, 0, 0.3); }
}

button:hover::after, select:hover::after, a:hover::after {
  content: '';
  position: absolute;
  top: -5px; left: -5px; right: -5px; bottom: -5px;
  background: radial-gradient(circle, rgba(255, 69, 0, 0.5) 0%, transparent 70%);
  animation: emberPulse 1.5s ease-in-out infinite;
}

button, .buy-burn-button a { animation: lowGlow 5s infinite ease-in-out; }

@keyframes lowGlow {
  0% { box-shadow: 0 0 5px rgba(255, 69, 0, 0.2); }
  50% { box-shadow: 0 0 10px rgba(255, 69, 0, 0.4); }
  100% { box-shadow: 0 0 5px rgba(255, 69, 0, 0.2); }
}

/* FIXED: move !important to end of the property (was inside parts) */
.buy-burn-button a {
  background: linear-gradient(45deg, #ff4500, #ff8c00, #e07c00, #ff4500) !important;
  background-size: 400% 400% !important;
  animation: lavaFlow 6s ease-in-out infinite !important;
  box-shadow: 0 0 20px rgba(255, 69, 0, 0.6),
             0 0 30px rgba(0, 0, 0, 0.3),
             inset 0 0 10px rgba(255, 69, 0, 0.8) !important;
  position: relative !important;
  color: #000000 !important;
}

.buy-burn-button a:hover {
  color: #ff8c00 !important;
  animation: smokeAnimation 3s infinite ease-in-out !important;
  transform: scale(1.05) !important;
}

@media (max-width: 640px) {
  .buy-burn-button a {
    box-shadow: 0 0 30px rgba(255, 69, 0, 0.8),
               0 0 40px rgba(0, 0, 0, 0.5),
               inset 0 0 15px rgba(255, 69, 0, 1) !important;
    animation: lavaFlow 8s ease-in-out infinite, smokeAnimation 4s infinite ease-in-out !important;
  }
}

@keyframes lavaFlow {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}

@keyframes smokeAnimation {
  0% { background: var(--background); box-shadow: inset 0 0 20px var(--smoke-color); }
  50% { background: linear-gradient(135deg, var(--background), var(--smoke-color)); box-shadow: inset 0 0 30px var(--smoke-color); }
  100% { background: var(--background); box-shadow: inset 0 0 20px var(--smoke-color); }
}

@layer utilities { .text-balance { text-wrap: balance; } }

.animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
.animate-fade-out { animation: fadeOut 3s forwards, slideDown 0.5s 2.5s forwards; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeOut { 0% { opacity: 1; } 50% { opacity: 1; } 100% { opacity: 0; } }
@keyframes slideDown { from { transform: translateY(0); } to { transform: translateY(100%); } }

@keyframes burnie-glow {
  0% { box-shadow: 0 0 5px var(--app-accent); }
  50% { box-shadow: 0 0 25px var(--app-accent); }
  100% { box-shadow: 0 0 5px var(--app-accent); }
}

@keyframes emberPulse {
  0% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.2); }
  100% { opacity: 0.5; transform: scale(1); }
}

@keyframes fieryGlow {
  0% { box-shadow: 0 0 15px var(--app-accent), 0 0 25px #ff8c00; }
  50% { box-shadow: 0 0 25px var(--app-accent), 0 0 50px #ff4500; }
  100% { box-shadow: 0 0 15px var(--app-accent), 0 0 25px #ff8c00; }
}

.glow-pulse { animation: fieryGlow 2.5s infinite ease-in-out; }

.video-container {
  position: relative;
  border: 2px solid #111111; /* Black border */
  box-shadow: 0 0 10px rgba(255, 69, 0, 0.4),
             0 0 20px rgba(255, 69, 0, 0.2);
  animation: burnie-glow 8s infinite ease-in-out; /* Slowed tremendously */
  will-change: transform;
}

.video-container video {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  object-fit: cover !important;
}

.fixed { animation: slideUp 0.5s ease-in-out; box-shadow: 0 0 15px var(--app-accent); }

@keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

@media (max-width: 640px) {
  .fixed { animation: slideUp 0.3s ease-in-out; }
  button, select, a { animation: shake 0.7s ease-in-out 2; }
}

@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-1px); }
  75% { transform: translateX(1px); }
  100% { transform: translateX(0); }
}

table { overflow-x: auto; }

/* --- SELECT: explicit dark-friendly theming --- */
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;

  background-color: var(--background) !important;
  color: var(--foreground) !important;

  padding-right: 2rem;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23ff4500' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;
  background-size: 1.5em;

  transition: background-color 0.2s, color 0.2s;
  border: 1px solid var(--app-accent-light);
}

select:focus {
  background-color: rgba(255, 69, 0, 0.08);
  color: var(--foreground);
  box-shadow: 0 0 10px var(--app-accent);
  outline: none;
}

select::after {
  content: '';
  position: absolute;
  right: 0.5rem; top: 50%;
  width: 1.5em; height: 1.5em;
  animation: arrowPulse 1.5s infinite ease-in-out;
}

@media (prefers-color-scheme: dark) {
  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23ff8c00' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
  }
}

button, .buy-burn-button a {
  background: linear-gradient(45deg, var(--app-accent), var(--app-accent-hover), #e07c00);
  background-size: 300% 300%;
  animation: gradientShift 4s ease-in-out infinite;
  border: 1px solid var(--app-accent-light);
}
button:hover, .buy-burn-button a:hover { background-position: 200% 100%; }

/* ---------- Ignite ripple ---------- */
.ignite { position: relative; overflow: hidden; }
.ignite:after{
  content:""; position:absolute; border-radius:50%;
  transform: translate(-50%,-50%) scale(0);
  pointer-events:none; opacity:.65;
  width:12rem; height:12rem;
  background: radial-gradient(circle, rgba(255,140,0,.45) 0%, rgba(255,69,0,.25) 40%, transparent 70%);
  animation:none;
}
.ignite.is-igniting:after { animation: ignitePop .55s ease-out; }
@keyframes ignitePop {
  from { transform: translate(var(--ix, -50%), var(--iy, -50%)) scale(.1); opacity:.8; }
  to   { transform: translate(var(--ix, -50%), var(--iy, -50%)) scale(1); opacity:0; }
}

/* ---------- Vote progress ---------- */
.vote-progress-grid{ display:grid; gap:.75rem }
.vp-row{ position:relative }
.vp-top{ display:flex; justify-content:space-between; font-weight:600; font-size:.95rem }
.vp-row--mine .vp-label{ color: var(--ock-text-success); text-shadow: 0 0 8px rgba(34,197,94,.3); }
.vp-bar{ height:10px; border-radius:999px; overflow:hidden; border:1px solid var(--app-card-border);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); }
.vp-bar>span{ display:block; height:100%; width:0;
  background:linear-gradient(90deg, var(--app-accent), var(--app-accent-hover));
  box-shadow:0 0 12px rgba(255,69,0,.45); transition: width .6s cubic-bezier(.25,.8,.25,1); }

/* ---------- Emoji burst ---------- */
.emoji-burst{
  position: fixed; left: 50%; top: 58%;
  transform: translate(-50%,-50%) scale(.6);
  font-size: 42px; z-index: 60; pointer-events:none;
  animation: burstPop .9s ease forwards;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.35));
}
@keyframes burstPop {
  0% { opacity:0; transform: translate(-50%,-50%) scale(.6) rotate(-6deg); }
  40% { opacity:1; transform: translate(-50%,-58%) scale(1) rotate(4deg); }
  100% { opacity:0; transform: translate(-50%,-80%) scale(1.1) rotate(0deg); }
}

/* ---------- Breathing halo for wallet pill ---------- */
.connect-wallet, .walletconnect-button{
  position: relative;
  box-shadow: 0 0 0 0 rgba(255,69,0,.35);
  animation: breathe 3.2s ease-in-out infinite;
}
@keyframes breathe {
  0%,100% { box-shadow: 0 0 0 0 rgba(255,69,0,.25); }
  50%     { box-shadow: 0 0 20px 6px rgba(255,140,0,.35); }
}

/* Accessibility guardrail */
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after { animation: none !important; transition: none !important; }
}

/* ---------- Compact Ballot ---------- */
.ballot { display: grid; gap: .6rem; }
.ballot-row {
  text-align: left;
  border: 1px solid var(--app-card-border);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,.04));
  padding: .75rem .85rem .7rem;
  border-radius: .65rem;
  transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
}
.ballot-row:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(0,0,0,.25); }
.ballot-row:disabled { opacity: .75; cursor: not-allowed; }
.ballot-row--active { border-color: var(--app-accent); box-shadow: 0 0 0 2px rgba(255,69,0,.25) inset; }

.ballot-top { display: grid; grid-template-columns: 1fr auto; align-items: baseline; gap: .75rem; }
.ballot-label {
  font-weight: 600;
  letter-spacing: .2px;
  color: #ffffff;              /* force white text */
  text-shadow: 0 0 4px rgba(0,0,0,.4); /* subtle halo for readability */
}
.ballot-right { display: flex; gap: .6rem; align-items: baseline; }
.ballot-votes { font-weight: 700; color: var(--ock-text-success); }
.ballot-pct {
  font-size: .85rem;
  opacity: .95;
  color: #ffffff;              /* force white text */
  text-shadow: 0 0 4px rgba(0,0,0,.4);
}

.ballot-bar { height: 8px; border-radius: 999px; overflow: hidden; margin-top: .55rem;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border: 1px solid var(--app-card-border);
}
.ballot-bar > span {
  display:block; height:100%; width:0;
  background: linear-gradient(90deg, var(--app-accent), var(--app-accent-hover));
  box-shadow:0 0 10px rgba(255,69,0,.35);
  transition: width .55s cubic-bezier(.25,.8,.25,1);
}

.ballot-tag {
  margin-top: .45rem;
  display: inline-block;
  font-size: .75rem;
  font-weight: 700;
  color: var(--ock-text-success);
}

/* Reduce motion clutter slightly in the vote area */
.ballot-row::after { animation-duration: .4s; }

/* ---------- Legendary polish: chips, focus, selected pulse ---------- */
.chip {
  display: inline-flex; align-items: center; gap: .4rem;
  padding: .28rem .6rem; border-radius: 999px;
  font-weight: 700; font-size: .78rem;
  background: rgba(255,255,255,.06);
  border: 1px solid var(--app-card-border);
  color: #fff;
}
.chip--accent {
  background: rgba(255,69,0,.12);
  border-color: rgba(255,69,0,.35);
}

/* tiny keyboard key visual */
.kbd {
  font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
  padding: .1rem .35rem; border-radius: .35rem;
  border: 1px solid var(--app-card-border);
  background: rgba(0,0,0,.35);
  font-size: .75rem; color: #fff;
}

.cta-hint {
  font-size: .8rem; opacity: .9;
  display: flex; gap: .6rem; align-items: center;
}

/* Strong, accessible focus state for ballot rows */
.ballot-row:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(255,69,0,.65),
              0 0 0 6px rgba(255,69,0,.15);
}

/* Subtle inner pulse when selected */
.ballot-row--active { position: relative; }
.ballot-row--active::before {
  content: ""; position: absolute; inset: -2px; border-radius: .7rem;
  box-shadow: 0 0 24px rgba(255,69,0,.25); pointer-events: none;
}

/* --- Hotkey chips & kbd buttons (final spec) --- */
.chip{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.2rem .55rem; border-radius:.5rem;
  border:1px solid var(--app-card-border);
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
  font-weight:700; font-size:.85rem; color:var(--foreground);
}
.cta-hint{ font-size:.85rem; opacity:.9; }

.kbd{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:1.75rem; height:1.5rem; padding:0 .35rem;
  border-radius:.375rem; border:1px solid var(--app-card-border);
  background:rgba(255,255,255,.06);
  font-weight:800; font-size:.9rem; color:var(--foreground);
  transition: transform .1s ease, box-shadow .2s ease;
}
.kbd:hover{ transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,.25); }
.kbd[disabled]{ opacity:.45; cursor:not-allowed; }

/* --- Hotkey active state + make the row numbers glow green when selected --- */
.kbd--active{
  color: var(--ock-text-success);
  box-shadow: 0 0 0 1px rgba(34,197,94,.35), 0 0 14px rgba(34,197,94,.25);
  transform: translateY(-1px);
}
.kbd{ cursor:pointer; user-select:none; }

.ballot-row--active .ballot-votes,
.ballot-row--active .ballot-pct{
  color: var(--ock-text-success) !important;
  text-shadow: 0 0 10px rgba(34,197,94,.35);
}

/* Hotkey active state + row numbers pop green */
.kbd--active{
  color: var(--ock-text-success);
  box-shadow: 0 0 0 1px rgba(34,197,94,.35), 0 0 14px rgba(34,197,94,.25);
  transform: translateY(-1px);
}
.kbd{ cursor:pointer; user-select:none; }

.ballot-row--active .ballot-votes,
.ballot-row--active .ballot-pct{
  color: var(--ock-text-success) !important;
  text-shadow: 0 0 10px rgba(34,197,94,.35);
}

/* ===== Destiny Neon Green Selection ===== */
:root {
  /* bright, readable neon green for selection */
  --destiny-green: #39ff88;
  --destiny-green-soft: rgba(57, 255, 136, .25);
  --destiny-green-ring: rgba(57, 255, 136, .55);
}

@keyframes neonPulseGreen {
  0%   { box-shadow: 0 0 0 2px var(--destiny-green-soft) inset, 0 0 10px var(--destiny-green-soft); }
  50%  { box-shadow: 0 0 0 2px var(--destiny-green-ring) inset, 0 0 22px var(--destiny-green-ring); }
  100% { box-shadow: 0 0 0 2px var(--destiny-green-soft) inset, 0 0 10px var(--destiny-green-soft); }
}
@keyframes sweepAura {
  0%   { opacity:.35; transform: translateX(-5%) }
  50%  { opacity:.7;  transform: translateX(5%) }
  100% { opacity:.35; transform: translateX(-5%) }
}

/* Hotkey chip base (already present); add cursor & smoothness */
.kbd { cursor: pointer; user-select: none; }

/* Hotkey ACTIVE: number + border glow neon green */
.kbd--active{
  color: var(--destiny-green) !important;
  border-color: var(--destiny-green) !important;
  box-shadow:
    0 0 0 1px var(--destiny-green) inset,
    0 0 16px var(--destiny-green-soft);
  transform: translateY(-1px);
}

/* Ballot row ACTIVE: swap brand orange ring for neon green destiny glow */
.ballot-row--active{
  border-color: var(--destiny-green) !important;
  transform: translateY(-1px);
  animation: neonPulseGreen 1.6s ease-in-out infinite;
  position: relative;
}
.ballot-row--active::before{
  /* subtle sweeping aura inside the row */
  content:"";
  position:absolute; inset: 2px;
  border-radius: inherit;
  pointer-events:none;
  background:
    radial-gradient(120px 40px at 20% 40%, rgba(57,255,136,.18), transparent 60%),
    radial-gradient(120px 40px at 80% 60%, rgba(57,255,136,.12), transparent 60%);
  animation: sweepAura 3.2s ease-in-out infinite;
}

/* Make the numbers + percent go neon green on the active row */
.ballot-row--active .ballot-votes,
.ballot-row--active .ballot-pct{
  color: var(--destiny-green) !important;
  text-shadow: 0 0 10px var(--destiny-green-soft);
}

/* Make the fill bar turn green when the row is active */
.ballot-row--active .ballot-bar > span{
  background: linear-gradient(90deg, var(--destiny-green), #8dffc2);
  box-shadow: 0 0 14px var(--destiny-green-soft);
}

/* Optional: focus-visible keeps the neon ring accessible */
.ballot-row:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 2px var(--destiny-green-ring),
    0 0 0 6px rgba(57,255,136,.15);
}

/* Chip + CTA hint already exist; keep them consistent with the neon state */
.chip--accent{
  background: rgba(57,255,136,.14);
  border-color: rgba(57,255,136,.45);
  color: var(--destiny-green);
}

/* ===== Legendary Vote CTA (spacetime-grade) ===== */
:root{
  --legend-cyan: #39d3ff;
  --legend-magenta: #ff3d9a;
  --legend-violet: #7a5cff;
  --legend-amber: #ffae3d;
  --destiny-green: #39ff88;
  --destiny-green-soft: rgba(57,255,136,.25);
  --destiny-green-ring: rgba(57,255,136,.55);
}

/* Core cosmic gradient that never looks flat */
@keyframes cosmicShift {
  0%   { background-position: 0% 0%;   filter: hue-rotate(0deg); }
  50%  { background-position: 120% 80%; filter: hue-rotate(12deg); }
  100% { background-position: 0% 0%;   filter: hue-rotate(0deg); }
}

/* A fast specular sweep across the button face */
@keyframes sweepShine {
  0%   { transform: translateX(-130%) skewX(-20deg); opacity: .0; }
  35%  { opacity: .25; }
  60%  { opacity: .4;  }
  100% { transform: translateX(130%)  skewX(-20deg); opacity: .0; }
}

/* Sub-surface warp rings that breathe */
@keyframes warpPulse {
  0%,100% { box-shadow:
      0 0 0 1px rgba(255,255,255,.06) inset,
      0 0 20px rgba(255,69,0,.20),
      0 0 36px rgba(57,255,136,.18); }
  50%     { box-shadow:
      0 0 0 1px rgba(255,255,255,.10) inset,
      0 0 30px rgba(255,69,0,.28),
      0 0 60px rgba(57,255,136,.34); }
}

/* Tiny drifting particulates (the “time dust”) */
@keyframes driftStars {
  0%   { background-position: 0 0, 0 0; }
  100% { background-position: 200% -200%, -200% 200%; }
}

/* Full-screen warp flash overlay on click */
@keyframes warpFlash {
  0%   { opacity: 0; filter: blur(0px); }
  10%  { opacity: .6; filter: blur(2px); }
  40%  { opacity: .35; filter: blur(1px); }
  100% { opacity: 0; filter: blur(0px); }
}

/* The Button: restrained at rest, god-tier when armed/hovered */
.legendary-cta{
  position: relative;
  overflow: hidden;
  border-radius: .75rem;
  border: 1px solid rgba(255,255,255,.08) !important;
  color: #0b0b0b !important;          /* legible on bright gradient */
  letter-spacing: .2px;
  font-weight: 800;
  transform: translateZ(0);
  backface-visibility: hidden;
  background:
    radial-gradient(120% 180% at 0% 0%,
      rgba(255,255,255,.15), transparent 60%),
    linear-gradient(135deg,
      var(--app-accent) 0%,
      var(--app-accent-hover) 40%,
      var(--legend-amber) 60%,
      var(--legend-violet) 100%);
  background-size: 220% 220%, 300% 300%;
  animation: cosmicShift 12s ease-in-out infinite;
  box-shadow:
    0 2px 10px rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.06) inset;
}

/* Subtle orbital dots */
.legendary-cta::before{
  content:"";
  position:absolute; inset:-2px;
  pointer-events:none; border-radius: inherit;
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.35) 60%, transparent 61%),
    radial-gradient(2px 2px at 80% 70%, rgba(255,255,255,.25) 60%, transparent 61%);
  background-repeat: no-repeat;
  animation: driftStars 8s linear infinite;
  opacity: .25;
}

/* The moving specular streak */
.legendary-cta::after{
  content:"";
  position:absolute; top:0; bottom:0; left:-30%;
  width:40%;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255,255,255,.75) 50%,
    transparent 100%);
  mix-blend-mode: screen;
  filter: blur(1px);
  transform: skewX(-20deg);
  animation: sweepShine 2.8s ease-in-out infinite;
}

/* Armed = user picked an option: dial everything up and echo destiny green */
.legendary-cta--armed{
  border-color: var(--destiny-green) !important;
  box-shadow:
    0 0 0 1px var(--destiny-green) inset,
    0 0 28px var(--destiny-green-soft),
    0 8px 28px rgba(0,0,0,.45);
  animation: cosmicShift 9s ease-in-out infinite, warpPulse 2.2s ease-in-out infinite;
}
.legendary-cta--armed:hover{
  transform: translateY(-1px) scale(1.015);
  box-shadow:
    0 0 0 1px var(--destiny-green) inset,
    0 0 42px var(--destiny-green-ring),
    0 12px 34px rgba(0,0,0,.5);
}

/* Click “impact”: tiny compression and bloom */
.legendary-cta:active{
  transform: translateY(0) scale(.99);
  filter: saturate(1.1) brightness(1.03);
}

/* Fullscreen warp overlay spawned by fireWarp() */
.warp-overlay{
  position: fixed; inset: 0; z-index: 60; pointer-events: none;
  background:
    radial-gradient(closest-side at 50% 50%, rgba(57,255,136,.35), transparent 60%),
    radial-gradient(closest-side at 50% 50%, rgba(255,255,255,.65), transparent 35%),
    radial-gradient(200% 140% at 50% 50%,
      rgba(122,92,255,.22), transparent 60%),
    conic-gradient(from 0turn at 50% 50%,
      rgba(255,61,154,.18), rgba(57,211,255,.18), rgba(255,174,61,.18), rgba(57,255,136,.18), rgba(255,61,154,.18));
  mix-blend-mode: screen;
  animation: warpFlash .9s ease-out both;
  filter: blur(.5px);
}

/* Motion safety */
@media (prefers-reduced-motion: reduce){
  .legendary-cta,
  .legendary-cta--armed,
  .legendary-cta::after,
  .legendary-cta::before,
  .warp-overlay{ animation: none !important; }
}

/* =========================
   POLISH PATCH (add at end)
   ========================= */

/* 1) Compact spacing for ballot + chips */
.ballot { gap: .5rem; }
.chip { margin-right: .5rem; margin-bottom: .5rem; }

/* 2) Make disabled primary CTA look intentionally disabled */
.legendary-cta[disabled]{
  opacity:.75;
  filter:saturate(.7);
  cursor:not-allowed;
  box-shadow:none;
}

/* 3) Soften hotkey badges so they don’t compete with the title */
.kbd{
  font-size:.75rem;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
}

/* 4) Smooth fill animation when vote % changes */
.ballot-bar span{
  display:block;
  height:6px;
  border-radius:999px;
  background: linear-gradient(90deg,#22c55e,#16a34a);
  transition: width .45s ease;
}

/* 5) Strong, accessible keyboard focus for all interactives */
button:focus-visible,
a:focus-visible{
  outline:2px solid rgba(255,255,255,.6);
  outline-offset:2px;
  border-radius:.5rem;
}

/* 6) Align icons/text on ballot rows perfectly */
.ballot-top { align-items: center; }

/* 7) Make the two connect buttons same width for symmetry */
.connect-wallet,
.walletconnect-button { width: 180px; }

/* brighter chip for dark backgrounds */
.chip--bright{
  background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
  border: 1px solid rgba(255,255,255,.35);
  color: #fff !important;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
}
/* --- Mobile-first polish for the intro actions --- */
.ready-block {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 12px;
}

/* keep existing ready-cta visuals, but let it span on phones */
@media (max-width: 640px) {
  .ready-cta {
    width: 100%;
    padding: 0.9rem 1rem;
    font-size: 1rem;
  }
  .read-now-btn {
    width: 100%;
    text-align: center;
  }
  .ready-hint {
    text-align: center;
    width: 100%;
    display: block;
    margin-top: 2px;
  }
  .unlock-text {
    text-align: center;
  }
  .buy-burn-button {
    position: sticky;
    bottom: calc(env(safe-area-inset-bottom, 0) + 12px);
    z-index: 20;
    margin: 1rem auto 0;
    display: flex;
    justify-content: center;
  }
  .buy-burn-button a {
    width: 100%;
    max-width: 420px; /* comfy width */
    justify-content: center;
  }
}
@media (max-width: 640px) {
  .mini-app-theme .card:last-child { padding-bottom: 0.5rem; }
}
/* Footer hero line */
.footer-legend{
  font-weight: 800;
  letter-spacing: .2px;
  text-align: center;
  opacity: .95;
  text-shadow: 0 1px 6px rgba(0,0,0,.45);
}
@media (max-width: 640px){
  .footer-legend{ font-size: .9rem; line-height: 1.25rem; }
}

/* Desktop centering helpers */
@media (min-width: 640px) {
  .buy-burn-button { width: 100%; justify-content: center; }
}
/* --- Minimal OCK swap layout (mobile-first) --- */
.swap-min {
  display: grid;
  gap: 10px;
  padding: 8px;
  border-radius: 12px;
  background: rgba(0,0,0,0.35);
}

.swap-min-row {
  display: grid;
  gap: 6px;
  padding: 10px;
  border: 1px solid rgba(255,140,0,0.25);
  border-radius: 12px;
  background: rgba(0,0,0,0.45);
}

.swap-min-label {
  font-size: 12px;
  opacity: .8;
}

.swap-min-toggle {
  margin: 0 auto;
  transform: scale(.9);
}

.swap-min-cta {
  width: 100%;
  border-radius: 12px;
  padding: 12px 14px;
  font-weight: 800;
  border: 1px solid rgba(255,140,0,0.35);
  background: linear-gradient(180deg, rgba(255,140,0,0.22), rgba(255,69,0,0.18));
  color: #ffd7a3;
}

.swap-min-msg {
  font-size: 12px;
  opacity: .85;
}

/* Nuke advanced chrome if a build tries to render it */
[class*="swap-settings"],
[class*="SwapSettings"],
[class*="swapAdvanced"],
[class*="swap-advanced"],
[class*="tokenSelector"],
[class*="TokenSelector"],
[class*="gear"],
[class*="settings"] {
  display: none !important;
}

/* Block stray popovers from opening token selectors */
button[aria-haspopup="dialog"],
button[role="combobox"] {
  pointer-events: none !important;
}

/* Fixed-pair swap layout (mobile-first, tight) */
.swap-box { display: grid; gap: 10px; margin-top: 8px; }
.swap-row { display: grid; gap: 8px; padding: 10px; border: 1px solid rgba(255,140,0,.25); border-radius: 12px; background: rgba(0,0,0,.45); }
.swap-row-top { display:flex; align-items:center; justify-content:space-between; font-size:12px; opacity:.9; }
.swap-token-line { display:flex; gap:8px; align-items:center; }
.swap-token-badge { font-weight:800; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,140,0,.35); background: rgba(255,69,0,.1); }
.swap-token-badge.burn { background: rgba(255,69,0,.18); }
.swap-input.tight { padding: 8px 10px; }
.swap-quick { display:flex; gap:6px; flex-wrap:wrap; }
.swap-divider { text-align:center; opacity:.7; font-weight:800; }

/* Make buttons/chips feel snug on small screens */
@media (max-width: 420px) {
  .swap-card { padding: 12px; }
  .swap-input { font-size: 14px; }
  .btn-ghost { padding: 0.4rem 0.6rem; }
}

/* --- Force RainbowKit modal to use dark theme --- */
[data-rk] .rk-modal {
  background-color: #0b0e14 !important;
  color: #ffffff !important;
}

[data-rk] .rk-modal-header,
[data-rk] .rk-menu-item {
  background-color: #0b0e14 !important;
  color: #ffffff !important;
}

[data-rk] .rk-connect-button {
  background-color: #161616 !important;
  border: 1px solid #2a2a2a !important;
  color: #ffffff !important;
}

[data-rk] .rk-wallet-option {
  background-color: #161616 !important;
  color: #ffffff !important;
}
/* Force RainbowKit modal dark mode */
[data-rk] {
  --rk-colors-modalBackground: #0b0e14 !important;
  --rk-colors-modalBorder: #1e1e1e !important;
  --rk-colors-menuItemBackground: #161616 !important;
  --rk-colors-generalBorder: #2a2a2a !important;
  --rk-colors-generalBorderDim: #1a1a1a !important;
  --rk-colors-actionButtonBorder: #2a2a2a !important;
  --rk-colors-actionButtonSecondaryBackground: #161616 !important;
  --rk-colors-profileAction: #161616 !important;
  --rk-colors-profileActionHover: #1f1f1f !important;
  --rk-colors-connectButtonBackground: #161616 !important;
  --rk-colors-connectButtonInnerBackground: #0b0e14 !important;
  --rk-colors-downloadBottomCardBackground: #0b0e14 !important;
  --rk-colors-downloadTopCardBackground: #161616 !important;
}
/* RainbowKit modal text colors for readability */
[data-rk] {
  --rk-colors-modalText: #ffffff !important;
  --rk-colors-modalTextSecondary: #cccccc !important;
  --rk-colors-accentColorForeground: #ffffff !important;
  --rk-colors-connectButtonText: #ffffff !important;
  --rk-colors-downloadBottomCardText: #ffffff !important;
  --rk-colors-downloadTopCardText: #ffffff !important;
  --rk-colors-error: #ff6b6b !important;
  --rk-colors-success: #4caf50 !important;
  --rk-colors-warning: #ffb347 !important;
}
/* --- RainbowKit Full Dark Burnie Theme Overrides --- */
[data-rk] {
  /* Modal container */
  --rk-colors-modalBackground: #0b0e14 !important;
  --rk-colors-modalBorder: #1e1e1e !important;

  /* Text */
  --rk-colors-modalText: #ffffff !important;
  --rk-colors-modalTextSecondary: #cccccc !important;
  --rk-colors-connectButtonText: #ffffff !important;
  --rk-colors-profileForeground: #ffffff !important;

  /* Links / highlights */
  --rk-colors-accentColor: #ff4500 !important;                /* Burnie orange */
  --rk-colors-accentColorForeground: #ffffff !important;
  --rk-colors-modalTextAccent: #ff8c00 !important;            /* Secondary orange highlight */
  --rk-colors-linkColor: #1e90ff !important;                  /* Links (like Learn More) */

  /* Buttons + options */
  --rk-colors-connectButtonBackground: #161616 !important;
  --rk-colors-connectButtonInnerBackground: #0b0e14 !important;
  --rk-colors-menuItemBackground: #161616 !important;
  --rk-colors-generalBorder: #2a2a2a !important;
  --rk-colors-generalBorderDim: #1a1a1a !important;

  /* Wallet option cards */
  --rk-colors-walletOptionBackground: #161616 !important;
  --rk-colors-walletOptionForeground: #ffffff !important;

  /* Status colors */
  --rk-colors-error: #ff6b6b !important;
  --rk-colors-success: #4caf50 !important;
  --rk-colors-warning: #ffb347 !important;
}
/* RainbowKit close (X) button fix */
[data-rk] {
  --rk-colors-closeButton: #ffffff !important;               /* X icon color */
  --rk-colors-closeButtonBackground: transparent !important; /* No white pill */
  --rk-colors-closeButtonBackgroundHover: #1f1f1f !important; /* Subtle hover */
}
/* RainbowKit close (X) button fix */
[data-rk] {
  --rk-colors-closeButton: #ffffff !important; /* X icon color */
  --rk-colors-closeButtonBackground: transparent !important;
  --rk-colors-closeButtonBackgroundHover: #1f1f1f !important;
}

/* RainbowKit close (X) button Burnie orange */
[data-rk] button[aria-label="Close"],
[data-rk] button[aria-label="Close"] svg,
[data-rk] button[aria-label="Close"] path {
  color: #ff4500 !important;   /* Burnie orange */
  stroke: #ff4500 !important;
  fill: #ff4500 !important;
}

[data-rk] button[aria-label="Close"]:hover {
  background: #1f1f1f !important; /* subtle dark hover background */
  border-radius: 50%;             /* keep it circular */
}

